# 开发日志

## 2025-12-10 开发日志

- 新增 `rules.md`，作为顶层 AI 协作规则：
  - 目的：统一各类任务（生成 PRD、任务拆分、样式设计等）的通用协作方式，避免每次都分别阅读 `create-prd.md`、`generate-tasks.md`、`design-style.md` 才能理解工作流。
  - 主要内容：定义文档优先级（`spec.md > rules.md > style.md > tasks.md`）、标准工作流程（提问 → 规划 → 执行 → 自检）、统一回答结构（Summary / Reasoning / Output / Next Step）、模板调度规则，以及任务列表管理、提交代码与开发日志的仓库级约定。
  - 预期效果：后续 AI 在新任务中能快速对齐协作模式，减少重复沟通和行为偏差。

- 更新 `create-prd.md` 生成规则：
  - 在 Output 部分补充：生成的 `spec.md` 顶部必须包含本地预览说明（优先使用 `pnpm dev`）、任务完成后的本地声音提醒命令，以及「语言使用规范」章节（区分内部中文与外部英文的使用范围）。
  - 目的：让 PRD 不仅描述功能，还内嵌项目运行方式和语言约束，方便开发者按文档直接启用与实现。

- 更新 `generate-tasks.md` 生成规则：
  - 补充「开发规范遵循」「任务管理」「沟通机制」等要求，强调实现必须遵守 `docs/spec.md` 与 `docs/style.md`，并在 `tasks.md` 中及时更新完成状态与 Relevant Files。
  - 引入 Task List Management / AI Instructions，明确“一次只做一个子任务”“完成后先更新 tasks 再继续”的执行节奏。
  - 目的：让生成的任务文档本身携带执行与协作规范，降低遗漏任务更新或越权变更范围的风险。

- 重构 `design-style.md` 为「生成样式文档模板 + 规则」：
  - 拆分为 Part A（使用说明 / 快速启动清单 / 决策规则）、Part B（可复用的 Design Tokens / Layout / Typography / 组件样式 / 交互 / 响应式 / A11y 模板）、Part C（项目示例）。
  - 增加强制规则：生成 `style.md` 时必须用项目变量覆盖 Part B 的示例值，仅在缺少信息且追问成本过高时保留默认示例；Part C 仅作参考，不得直接复制为输出样式。
  - 目的：使样式体系生成过程既可复用、又不会把示例当成“紫色科技风默认主题”直接套用到所有项目。

### 未完成事项与下一步

- 目前尚未将 `rules.md` 中的所有约定与现有自动化脚本（如 CI、lint 规则）打通；后续可考虑：
  - 增加对 `spec.md` / `style.md` / `tasks.md` 结构的自动校验；
  - 在 CI 中检查提交信息是否符合 Angular 规范。
- 建议后续由人为确认：当前的语言规范与提交流程是否满足团队习惯，若有调整再同步更新 `rules.md` 与相关模板。***
